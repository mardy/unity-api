add_subdirectory(unity)

add_library(${UNITY_API_LIB} SHARED ${UNITY_API_LIB_SRC})
set_target_properties(${UNITY_API_LIB} PROPERTIES
    VERSION "${UNITY_API_MAJOR}.${UNITY_API_MINOR}"
    SOVERSION "${UNITY_API_MAJOR}.${UNITY_API_MINOR}"
)

install(TARGETS ${UNITY_API_LIB} LIBRARY DESTINATION lib)

configure_file(lib${UNITY_API_LIB}.pc.in lib${UNITY_API_LIB}.pc @ONLY)
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/lib${UNITY_API_LIB}.pc DESTINATION lib/pkgconfig)

set(UNITY_API_LIB_SRC ${UNITY_API_LIB_SRC} ${UNITY_SRC} PARENT_SCOPE)
